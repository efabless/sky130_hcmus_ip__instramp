v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 1110 -2050 3550 -1650 {flags=graph
y1=0
y2=0.01
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=0.0001
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
color="4 5 6 7 8 10"
node="i(v.x1.x7.vmeas)
i(v.x1.x7.vmeas1)
i(v.x1.x7.vmeas2)
i(v.x1.x7.vmeas3)
i(v.x1.x7.vmeas4)
i(v.x1.x7.vmeas5)"
hilight_wave=2}
B 2 2750 -1630 3550 -1230 {flags=graph
y1=-0.017
y2=0.017
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=0.0001
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=vout
color=10
dataset=-1
unitx=1
logx=0
logy=0
hilight_wave=0}
B 2 1930 -1630 2730 -1230 {flags=graph
y1=-0.00014
y2=0.00013
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=0.0001
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node="vout1
vout2"
color="6 21"
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 1110 -1630 1910 -1230 {flags=graph
y1=-1e-06
y2=1e-06
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=0.0001
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node="in1
in2"
color="4 5"
dataset=-1
unitx=1
logx=0
logy=0
}
N 1290 -940 1290 -900 {
lab=VDD}
N 1370 -920 1370 -900 {
lab=VSS}
N 1770 -780 1770 -760 {
lab=IN1}
N 1940 -760 1940 -740 {
lab=IN2}
N 1290 -840 1290 -820 {
lab=GND}
N 1370 -840 1370 -820 {
lab=GND}
N 1940 -680 1940 -660 {
lab=CM}
N 1290 -940 2070 -940 {
lab=VDD}
N 1370 -920 2070 -920 {
lab=VSS}
N 1770 -780 2360 -780 {
lab=IN1}
N 1940 -760 2360 -760 {
lab=IN2}
N 2660 -760 2700 -760 {
lab=VOUT}
N 2660 -550 2700 -550 {
lab=VOUT1}
N 2660 -530 2700 -530 {
lab=VOUT2}
N 2120 -680 2360 -680 {
lab=#net1}
N 2120 -680 2120 -520 {
lab=#net1}
N 1980 -520 2120 -520 {
lab=#net1}
N 2140 -660 2360 -660 {
lab=#net2}
N 2140 -660 2140 -500 {
lab=#net2}
N 2060 -500 2140 -500 {
lab=#net2}
N 2160 -640 2360 -640 {
lab=#net3}
N 2160 -640 2160 -480 {
lab=#net3}
N 2140 -480 2160 -480 {
lab=#net3}
N 2180 -620 2360 -620 {
lab=#net4}
N 2180 -620 2180 -480 {
lab=#net4}
N 2180 -480 2220 -480 {
lab=#net4}
N 2200 -600 2360 -600 {
lab=#net5}
N 2200 -600 2200 -500 {
lab=#net5}
N 2200 -500 2240 -500 {
lab=#net5}
N 2240 -500 2240 -420 {
lab=#net5}
N 2220 -580 2360 -580 {
lab=#net6}
N 2220 -580 2220 -520 {
lab=#net6}
N 2220 -520 2260 -520 {
lab=#net6}
N 2260 -520 2260 -440 {
lab=#net6}
N 2260 -440 2380 -440 {
lab=#net6}
N 2240 -560 2360 -560 {
lab=#net7}
N 2240 -560 2240 -540 {
lab=#net7}
N 2240 -540 2280 -540 {
lab=#net7}
N 2280 -540 2280 -460 {
lab=#net7}
N 2280 -460 2460 -460 {
lab=#net7}
N 2300 -540 2360 -540 {
lab=#net8}
N 2300 -540 2300 -480 {
lab=#net8}
N 2300 -480 2540 -480 {
lab=#net8}
N 2320 -520 2360 -520 {
lab=#net9}
N 2320 -520 2320 -500 {
lab=#net9}
N 2320 -500 2620 -500 {
lab=#net9}
N 1900 -340 1900 -320 {
lab=GND}
N 1980 -340 1980 -320 {
lab=GND}
N 2060 -340 2060 -320 {
lab=GND}
N 2140 -340 2140 -320 {
lab=GND}
N 2220 -340 2220 -320 {
lab=GND}
N 2300 -340 2300 -320 {
lab=GND}
N 2380 -340 2380 -320 {
lab=GND}
N 2460 -340 2460 -320 {
lab=GND}
N 2540 -340 2540 -320 {
lab=GND}
N 2620 -340 2620 -320 {
lab=GND}
N 2300 -420 2300 -400 {
lab=#net5}
N 2240 -420 2300 -420 {
lab=#net5}
N 2100 -700 2360 -700 {
lab=#net10}
N 2100 -700 2100 -540 {
lab=#net10}
N 1900 -540 2100 -540 {
lab=#net10}
N 1900 -540 1900 -400 {
lab=#net10}
N 1980 -520 1980 -400 {
lab=#net1}
N 2060 -500 2060 -400 {
lab=#net2}
N 2140 -480 2140 -400 {
lab=#net3}
N 2220 -480 2220 -400 {
lab=#net4}
N 2380 -440 2380 -400 {
lab=#net6}
N 2460 -460 2460 -400 {
lab=#net7}
N 2540 -480 2540 -400 {
lab=#net8}
N 2620 -500 2620 -400 {
lab=#net9}
N 1550 -730 1550 -710 {
lab=GND}
N 1770 -560 1770 -540 {
lab=GND}
N 1550 -840 1550 -790 {
lab=ibias}
N 1630 -720 1630 -700 {
lab=GND}
N 1630 -820 1630 -780 {
lab=ENA}
N 1630 -820 2360 -820 {
lab=ENA}
N 1550 -840 2360 -840 {
lab=ibias}
N 2070 -940 2360 -940 {
lab=VDD}
N 2070 -920 2360 -920 {
lab=VSS}
N 1450 -840 1450 -820 {
lab=GND}
N 1450 -900 2360 -900 {
lab=DVDD}
N 2310 -880 2360 -880 {
lab=VSS}
N 2310 -920 2310 -880 {
lab=VSS}
N 1770 -700 1770 -660 {
lab=CM}
N 1770 -660 1770 -620 {
lab=CM}
N 2080 -740 2360 -740 {
lab=CM}
N 2080 -740 2080 -660 {
lab=CM}
N 1770 -660 2080 -660 {
lab=CM}
C {devices/vsource.sym} 1290 -870 0 0 {name=V1 value=3.3
}
C {devices/vsource.sym} 1370 -870 0 0 {name=V2 value=0}
C {devices/vsource.sym} 1770 -730 0 0 {name=V3 value="SIN(0 1u \{fin\} 0 0 0)" }
C {devices/vsource.sym} 1940 -710 0 0 {name=V4 value="SIN(0 1u \{fin\} 0 0 180)" }
C {devices/gnd.sym} 1290 -820 0 0 {name=l1 lab=GND}
C {devices/gnd.sym} 1370 -820 0 0 {name=l2 lab=GND}
C {devices/opin.sym} 2700 -760 0 0 {name=p1 lab=VOUT}
C {devices/opin.sym} 2700 -550 0 0 {name=p2 lab=VOUT1}
C {devices/opin.sym} 2700 -530 0 0 {name=p3 lab=VOUT2}
C {devices/code_shown.sym} 2880 -745 0 0 {name=s2 only_toplevel=false value="* Instrumentation amplifier testbench
.lib /usr/share/pdk/sky130A/libs.tech/ngspice/sky130.lib.spice tt
*.include ../netlist/layout/sky130_hcmus_ip__instramp.spice
.include /usr/share/pdk/sky130A/libs.ref/sky130_fd_sc_hvl/spice/sky130_fd_sc_hvl.spice
.param fin = 10K
.control
save all
tran 0.1u 100u
meas tran minv MIN v(vout)
meas tran maxv MAX v(vout)
let gain = ((abs(maxv)+abs(minv))/(2e-6))
print gain
write sky130_hcmus_ip__instramp_tb.raw
.endc"}
C {devices/lab_wire.sym} 1800 -780 0 0 {name=p4 sig_type=std_logic lab=IN1}
C {devices/lab_wire.sym} 1970 -760 0 0 {name=p5 sig_type=std_logic lab=IN2}
C {devices/vsource.sym} 1900 -370 0 0 {name=VD0 value=1.8}
C {devices/gnd.sym} 1900 -320 0 0 {name=VD10 value=1.8}
C {devices/vsource.sym} 1980 -370 0 0 {name=VD11 value=1.8}
C {devices/gnd.sym} 1980 -320 0 0 {name=VD12 value=1.8}
C {devices/vsource.sym} 2060 -370 0 0 {name=VD13 value=1.8}
C {devices/gnd.sym} 2060 -320 0 0 {name=VD14 value=1.8}
C {devices/vsource.sym} 2140 -370 0 0 {name=VD15 value=1.8}
C {devices/gnd.sym} 2140 -320 0 0 {name=VD16 value=1.8}
C {devices/vsource.sym} 2220 -370 0 0 {name=VD17 value=1.8}
C {devices/gnd.sym} 2220 -320 0 0 {name=VD18 value=1.8}
C {devices/vsource.sym} 2300 -370 0 0 {name=VD19 value=1.8}
C {devices/gnd.sym} 2300 -320 0 0 {name=VD20 value=1.8}
C {devices/vsource.sym} 2380 -370 0 0 {name=VD21 value=1.8}
C {devices/gnd.sym} 2380 -320 0 0 {name=VD22 value=1.8}
C {devices/vsource.sym} 2460 -370 0 0 {name=VD23 value=1.8}
C {devices/gnd.sym} 2460 -320 0 0 {name=VD24 value=1.8}
C {devices/vsource.sym} 2540 -370 0 0 {name=VD25 value=1.8}
C {devices/gnd.sym} 2540 -320 0 0 {name=VD26 value=1.8}
C {devices/vsource.sym} 2620 -370 0 0 {name=VD27 value=1.8}
C {devices/gnd.sym} 2620 -320 0 0 {name=VD28 value=1.8}
C {devices/launcher.sym} 3320 -950 0 0 {name=h5
descr="load waves" 
tclcommand="xschem raw_read $netlist_dir/IA_v4_testbench.raw tran"
}
C {devices/lab_wire.sym} 1400 -920 0 0 {name=p6 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} 1320 -940 0 0 {name=p7 sig_type=std_logic lab=VDD}
C {sky130_hcmus_ip__instramp.sym} 2510 -770 0 0 {name=x2}
C {devices/isource.sym} 1550 -760 2 0 {name=I0 value=100n}
C {devices/gnd.sym} 1550 -710 0 0 {name=VD1 value=1.8}
C {devices/vsource.sym} 1770 -590 0 0 {name=VD2 value=1.65}
C {devices/gnd.sym} 1770 -540 0 0 {name=VD3 value=1.8}
C {devices/vsource.sym} 1630 -750 0 0 {name=VD4 value=1.8}
C {devices/gnd.sym} 1630 -700 0 0 {name=VD5 value=1.8}
C {devices/lab_wire.sym} 1700 -820 0 0 {name=p8 sig_type=std_logic lab=ENA}
C {devices/lab_wire.sym} 2080 -740 0 0 {name=p9 sig_type=std_logic lab=CM}
C {devices/lab_wire.sym} 1620 -840 0 0 {name=p10 sig_type=std_logic lab=ibias}
C {devices/vsource.sym} 1450 -870 0 0 {name=V5 value=1.8
}
C {devices/gnd.sym} 1450 -820 0 0 {name=l5 lab=GND}
C {devices/lab_wire.sym} 1520 -900 0 0 {name=p11 sig_type=std_logic lab=DVDD}
